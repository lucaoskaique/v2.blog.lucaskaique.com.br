---
layout: post
date: 2024-11-02T05:24:00.000Z
main-class: js
color: "#D6BA32"
tags:
  - nextjs
  - ssg
  - ssr
  - serverside
  - ""
pt-BR:
  title: "Quando usar SSG vs SSR no Next.js: Uma dúvida sincera para um caso real"
  description: >-
    Hoje acordei com uma dúvida que tive durante o desenvolvimento do site de um
    cliente: quando usar Server-Side Rendering (SSR) e quando usar Static Site
    Generation (SSG) no Next.js?
  body: "As vezes fazendo um blog ou site a gente acha que tomou a melhor decisão mas ai você acorda a noite e pensa que talvez não foi a melhor solução e enquanto não responder se foi ou não com toda certeza desse universo, você não dorme, que foi o meu caso.\n\n![finally go to bed start dreaming about coding](/assets/img/quando-usar-ssg-vs-ssr-no-next-js-uma-duvida-sincera-para-um-caso-real/finallycotobed.jpg \"finally go to bed start dreaming about coding\")\n\n## A Dúvida Inicial\n\nMinha confusão começou depois que já estavam prontas as páginas e suas rotas para categorias e tags dos posts. Eu tinha duas rotas principais:\n\n```\nsrc/pages/posts/category/[category].tsx\nsrc/pages/posts/tag/[tag].tsx\n```\n\nE a grande questão era: usei SSR (Server-Side Rendering) para ambas, foi a melhor estratégia?\n\n> *Antes de mais nada estou usando NextJS 14.2 com Pages Router, até porque SSR e SSG não é uma preocupação no App Router.*\n\n## Entendendo o Cenário\n\nPara saber se tomei a decisão certa, precisei responder três perguntas fundamentais:\n\n1. **Com que frequência as categorias e tags mudam?**\n\n   * Categorias: São fixas, não mudam\n   * Tags: São dinâmicas e podem ser infinitas\n2. **Quantas categorias e tags existem?**\n\n   * Categorias: Apenas 5 tipos fixos\n   * Tags: Quantidade ilimitada\n3. **Como funciona a navegação?**\n\n   * Quando clicamos em uma categoria ou tag, somos direcionados para uma página que lista todos os posts relacionados\n   * Exemplo: `/posts/category/rock` ou `/posts/tag/jazz`\n\n## A Solução\n\nTalvez para Tags foi uma boa ideia, pelo volume de tags, mas pra categories....E depois de analisar bem o cenário, chegamos à seguinte conclusão:\n\n### Para Categorias: SSG (Static Site Generation)\n\n```typescript\n// pages/posts/category/[category].tsx\nexport async function getStaticPaths() {\n  // Como são apenas 5 categorias fixas\n  const categories = ['rock', 'jazz', 'classical', 'pop', 'electronic']\n  \n  return {\n    paths: categories.map(category => ({\n      params: { category }\n    })),\n    fallback: false // Não precisamos de fallback\n  }\n}\n\nexport async function getStaticProps({ params }) {\n  const posts = await getPostsByCategory(params.category)\n  \n  return {\n    props: {\n      posts,\n      category: params.category\n    },\n    revalidate: 3600 // Regera a cada hora\n  }\n}\n```\n\n**Por quê?**\n\n* São apenas 5 categorias fixas\n* As categorias não mudam\n* Melhor performance\n* Menor custo de servidor\n* Ótimo para SEO\n\n### Para Tags: SSR (Server-Side Rendering)\n\n```typescript\n// pages/posts/tag/[tag].tsx\nexport async function getServerSideProps({ params }) {\n  const posts = await getPostsByTag(params.tag)\n\n  return {\n    props: {\n      posts,\n      tag: params.tag\n    }\n  }\n}\n```\n\n**Por quê?**\n\n* Número ilimitado de tags\n* Novas tags podem ser adicionadas a qualquer momento\n* Precisa ser dinâmico\n* Não faz sentido gerar páginas estáticas para todas as possibilidades\n\n## Dicas Práticas\n\n1. **Para Categorias (SSG)**\n\n   * Use `getStaticProps` com `getStaticPaths`\n   * Defina `fallback: false` já que as categorias são fixas\n   * Considere usar `revalidate` se quiser atualizar a lista de posts periodicamente\n2. **Para Tags (SSR)**\n\n   * Use `getServerSideProps`\n   * Não precisa se preocupar com paths predefinidos\n   * Mantenha um bom cache no servidor para melhorar performance\n\n## Bônus: Teste seu conhecimento! \U0001F914\n\n### A Pergunta do Milhão \U0001F33D\nPara a página de `pages/posts/[slug].tsx` usaremos SSG ou SSR? Pensa antes de responder...\n\n<details>\n <summary>\U0001F449 CLIQUE AQUI PARA A RESPOSTA</summary>\n \n Se você respondeu SSG (e ISR junto), você tá correto! \U0001F389\n \n **Por quê?**\n - Posts geralmente são conteúdo estático\n - Com ISR, podemos regenerar páginas quando novos posts são adicionados\n - Não precisa regenerar todas as páginas quando um novo post é criado\n - Melhor performance para o usuário\n - Ótimo para SEO\n - Menor custo de infraestrutura (comparado a SSR)\n\n **Código de exemplo:**\n ```typescript\n // pages/posts/[slug].tsx\n export async function getStaticPaths() {\n   const posts = await getAllPosts()\n   \n   return {\n     paths: posts.map(post => ({\n       params: { slug: post.slug }\n     })),\n     fallback: 'blocking' // Importante para ISR: permite gerar novas páginas sob demanda\n   }\n }\n\n export async function getStaticProps({ params }) {\n   const post = await getPostBySlug(params.slug)\n   \n   return {\n     props: {\n       post\n     },\n     revalidate: 3600 // ISR: regenera a cada hora se necessário\n   }\n }\n ```\n\n **Benefícios do ISR neste caso:**\n - Páginas existentes continuam estáticas e rápidas\n - Novos posts são gerados automaticamente quando acessados\n - Atualiza periodicamente sem precisar fazer novo build\n - Melhor equilíbrio entre performance e conteúdo atual\n</details>\n\n## Conclusão\n\nA chave é entender bem o seu caso de uso. No nosso cenário:\n\n* Categorias são previsíveis e limitadas → SSG\n* Tags são dinâmicas e ilimitadas → SSR\n\nEsta combinação nos dá o melhor dos dois mundos: páginas ultra rápidas para navegação por categorias e flexibilidade total para tags.\n\n
  ## Recursos Úteis\n\n* [Documentação do Next.js sobre SSG](https://nextjs.org/docs/basic-features/data-fetching/get-static-props)\n* [Documentação do Next.js sobre SSR](https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props)\n\nEspero que este artigo ajude você a tomar a melhor decisão para o seu projeto! Se ficou alguma dúvida, manda nos comentários! \U0001F609\n"
en:
  title: "When to Use SSG vs SSR in Next.js: An Honest Question for a Real Case"
  description: >-
    Today I woke up with a doubt I had during the development of a client's
    website: when to use Server-Side Rendering (SSR) and when to use Static Site
    Generation (SSG) in Next.js?
  body: "As vezes fazendo um blog ou site a gente acha que tomou a melhor decisão mas ai você acorda a noite e pensa que talvez não foi a melhor solução e enquanto não responder se foi ou não com toda certeza desse universo, você não dorme, que foi o meu caso.\n\n![finally go to bed start dreaming about coding](/assets/img/quando-usar-ssg-vs-ssr-no-next-js-uma-duvida-sincera-para-um-caso-real/finallycotobed.jpg \"finally go to bed start dreaming about coding\")\n\n## A Dúvida Inicial\n\nMinha confusão começou depois que já estavam prontas as páginas e suas rotas para categorias e tags dos posts. Eu tinha duas rotas principais:\n\n```\nsrc/pages/posts/category/[category].tsx\nsrc/pages/posts/tag/[tag].tsx\n```\n\nE a grande questão era: usei SSR (Server-Side Rendering) para ambas, foi a melhor estratégia?\n\n> *Antes de mais nada estou usando NextJS 14.2 com Pages Router, até porque SSR e SSG não é uma preocupação no App Router.*\n\n## Entendendo o Cenário\n\nPara saber se tomei a decisão certa, precisei responder três perguntas fundamentais:\n\n1. **Com que frequência as categorias e tags mudam?**\n\n   * Categorias: São fixas, não mudam\n   * Tags: São dinâmicas e podem ser infinitas\n2. **Quantas categorias e tags existem?**\n\n   * Categorias: Apenas 5 tipos fixos\n   * Tags: Quantidade ilimitada\n3. **Como funciona a navegação?**\n\n   * Quando clicamos em uma categoria ou tag, somos direcionados para uma página que lista todos os posts relacionados\n   * Exemplo: `/posts/category/rock` ou `/posts/tag/jazz`\n\n## A Solução\n\nTalvez para Tags foi uma boa ideia, pelo volume de tags, mas pra categories....E depois de analisar bem o cenário, chegamos à seguinte conclusão:\n\n### Para Categorias: SSG (Static Site Generation)\n\n```typescript\n// pages/posts/category/[category].tsx\nexport async function getStaticPaths() {\n  // Como são apenas 5 categorias fixas\n  const categories = ['rock', 'jazz', 'classical', 'pop', 'electronic']\n  \n  return {\n    paths: categories.map(category => ({\n      params: { category }\n    })),\n    fallback: false // Não precisamos de fallback\n  }\n}\n\nexport async function getStaticProps({ params }) {\n  const posts = await getPostsByCategory(params.category)\n  \n  return {\n    props: {\n      posts,\n      category: params.category\n    },\n    revalidate: 3600 // Regera a cada hora\n  }\n}\n```\n\n**Por quê?**\n\n* São apenas 5 categorias fixas\n* As categorias não mudam\n* Melhor performance\n* Menor custo de servidor\n* Ótimo para SEO\n\n### Para Tags: SSR (Server-Side Rendering)\n\n```typescript\n// pages/posts/tag/[tag].tsx\nexport async function getServerSideProps({ params }) {\n  const posts = await getPostsByTag(params.tag)\n\n  return {\n    props: {\n      posts,\n      tag: params.tag\n    }\n  }\n}\n```\n\n**Por quê?**\n\n* Número ilimitado de tags\n* Novas tags podem ser adicionadas a qualquer momento\n* Precisa ser dinâmico\n* Não faz sentido gerar páginas estáticas para todas as possibilidades\n\n## Dicas Práticas\n\n1. **Para Categorias (SSG)**\n\n   * Use `getStaticProps` com `getStaticPaths`\n   * Defina `fallback: false` já que as categorias são fixas\n   * Considere usar `revalidate` se quiser atualizar a lista de posts periodicamente\n2. **Para Tags (SSR)**\n\n   * Use `getServerSideProps`\n   * Não precisa se preocupar com paths predefinidos\n   * Mantenha um bom cache no servidor para melhorar performance\n\n## Bônus: Teste seu conhecimento! \U0001F914\n\n### A Pergunta do Milhão \U0001F33D\nPara a página de `pages/posts/[slug].tsx` usaremos SSG ou SSR? Pensa antes de responder...\n\n<details>\n <summary>\U0001F449 CLIQUE AQUI PARA A RESPOSTA</summary>\n \n Se você respondeu SSG (e ISR junto), você tá correto! \U0001F389\n \n **Por quê?**\n - Posts geralmente são conteúdo estático\n - Com ISR, podemos regenerar páginas quando novos posts são adicionados\n - Não precisa regenerar todas as páginas quando um novo post é criado\n - Melhor performance para o usuário\n - Ótimo para SEO\n - Menor custo de infraestrutura (comparado a SSR)\n\n **Código de exemplo:**\n ```typescript\n // pages/posts/[slug].tsx\n export async function getStaticPaths() {\n   const posts = await getAllPosts()\n   \n   return {\n     paths: posts.map(post => ({\n       params: { slug: post.slug }\n     })),\n     fallback: 'blocking' // Importante para ISR: permite gerar novas páginas sob demanda\n   }\n }\n\n export async function getStaticProps({ params }) {\n   const post = await getPostBySlug(params.slug)\n   \n   return {\n     props: {\n       post\n     },\n     revalidate: 3600 // ISR: regenera a cada hora se necessário\n   }\n }\n ```\n\n **Benefícios do ISR neste caso:**\n - Páginas existentes continuam estáticas e rápidas\n - Novos posts são gerados automaticamente quando acessados\n - Atualiza periodicamente sem precisar fazer novo build\n - Melhor equilíbrio entre performance e conteúdo atual\n</details>\n\n## Conclusão\n\nA chave é entender bem o seu caso de uso. No nosso cenário:\n\n* Categorias são previsíveis e limitadas → SSG\n* Tags são dinâmicas e ilimitadas → SSR\n\nEsta combinação nos dá o melhor dos dois mundos: páginas ultra rápidas para navegação por categorias e flexibilidade total para tags.\n\n## Recursos Úteis\n\n* [Documentação do Next.js sobre SSG](https://nextjs.org/docs/basic-features/data-fetching/get-static-props)\n* [Documentação do Next.js sobre SSR](https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props)\n\nEspero que este artigo ajude você a tomar a melhor decisão para o seu projeto! Se ficou alguma dúvida, manda nos comentários! \U0001F609\n"
---
